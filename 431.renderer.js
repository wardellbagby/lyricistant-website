"use strict";(self.webpackChunklyricistant=self.webpackChunklyricistant||[]).push([[431,740],{4588:(e,t,n)=>{n.d(t,{Z:()=>i,r:()=>r});var a,o=n(7294);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}var r=function(e){return o.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1080 1080",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},e),a||(a=o.createElement("path",{d:"M592.265 470.55c-20.047-.319-38.048.176-52.263.176h-.004c-14.215 0-32.216-.495-52.261-.176-17.723-10.982-53.501-37.388-72.145-80.758-14.428-33.563-24.106-61.379-36.711-79.831-15.816-23.151-35.498-34.601-69.354-29.222-16.637 2.642-33.045 12.088-46.071 26.691-28.142 31.546-40.977 87.562-3.838 141.709 16.956 24.721 45.235 42.363 75.276 54.42-47.412 27.244-75.95 72.203-86.109 127.629-16.644 90.807 25.192 155.58 75.307 197.187 46.396 38.519 114.729 69.158 215.806 69.784l-.15-.005h.504l-.15.005c101.077-.626 169.41-31.265 215.806-69.784 50.115-41.607 91.952-106.38 75.307-197.187-10.159-55.426-38.697-100.385-86.108-127.628 30.042-12.058 58.321-29.7 75.277-54.421 37.139-54.147 24.304-110.163-3.838-141.709-13.026-14.603-29.434-24.049-46.071-26.691-33.856-5.379-53.538 6.071-69.354 29.222-12.605 18.452-22.283 46.268-36.711 79.831-18.644 43.37-54.422 69.776-72.145 80.758zm9.057 96.811 7.257-28.92c2.734-10.894-3.891-21.958-14.785-24.691s-21.958 3.891-24.691 14.785l-7.877 31.391a211.13 211.13 0 0 1-21.225 52.938 211.13 211.13 0 0 1-21.225-52.938l-7.877-31.391c-2.221-8.851-9.941-14.884-18.601-15.369l-1.003-.031a20.35 20.35 0 0 0-5.087.615c-10.894 2.733-17.519 13.797-14.785 24.691l7.257 28.92c24.749 16.308 41.097 44.35 41.097 76.181 0 50.317-40.851 91.168-91.168 91.168s-91.168-40.851-91.168-91.168 40.851-91.168 91.168-91.168a91 91 0 0 1 26.371 3.88c-6.214-12.16-15.449-23.71-28.939-28.208-32.329-10.78-74.18-5.365-115.225 50.487-38.357 52.193-26.981 126.591 18.791 180.196 44.956 52.649 107.783 82.754 210.394 82.448 102.611.306 165.438-29.799 210.394-82.448 45.772-53.605 57.148-128.003 18.791-180.196-41.045-55.852-82.896-61.267-115.225-50.487-13.49 4.498-22.725 16.048-28.939 28.208a91 91 0 0 1 26.371-3.88c50.317 0 91.168 40.851 91.168 91.168s-40.851 91.168-91.168 91.168-91.168-40.851-91.168-91.168c0-31.831 16.348-59.873 41.097-76.181zm-94.991 202.564c-8.501-15.787-4.855-35.363 8.758-47.031a.36.36 0 0 0 .021-.019c14.324-12.277 35.46-12.277 49.784 0l.021.019c13.613 11.668 17.259 31.244 8.758 47.031l-21.615 40.142a13.69 13.69 0 0 1-24.112 0l-21.615-40.142zm84.521-122.913 2.047-3.066a69.52 69.52 0 0 1 62.281-30.745 69.516 69.516 0 0 1 57.73 38.356 16.2 16.2 0 0 1 1.791 7.427 16.29 16.29 0 0 1-16.28 16.28c-6.464 0-12.053-3.775-14.68-9.238a36.954 36.954 0 0 0-63.77-3.988 4.38 4.38 0 0 1-.864.962c-2.601 5.535-8.228 9.37-14.743 9.37a16.29 16.29 0 0 1-16.28-16.28 16.2 16.2 0 0 1 2.768-9.078zm-223.76 4.545a69.512 69.512 0 0 1 57.73-38.356 69.52 69.52 0 0 1 62.281 30.745l.863 1.517a16.21 16.21 0 0 1 3.952 10.627 16.29 16.29 0 0 1-16.28 16.28c-6.214 0-11.62-3.489-14.364-8.614a28.18 28.18 0 0 1-1.242-1.718 36.955 36.955 0 0 0-63.771 3.988c-2.627 5.463-8.216 9.238-14.68 9.238a16.29 16.29 0 0 1-16.28-16.28 16.2 16.2 0 0 1 1.791-7.427zm324.444-169.342c26.738-18.241 61.814-44.063 84.404-67.97 43.613-46.155 16.513-83.682 10.606-90.778-6.432-5.573-13.684-9.381-21.179-10.572-8.894-1.412-16.035-1.075-21.987 1.423-9.37 3.933-15.359 12.718-21.416 24.176-8.84 16.725-16.714 38.739-27.641 64.157-13.125 30.531-33.39 53.993-52.124 70.767 16.318 1.762 32.996 4.52 49.337 8.797zm-253.733-8.797c-18.739-16.78-39.001-40.239-52.124-70.767-10.927-25.418-18.801-47.432-27.641-64.157-6.057-11.458-12.046-20.243-21.416-24.176-5.952-2.498-13.093-2.835-21.987-1.423-7.495 1.191-14.747 4.999-21.179 10.572-5.907 7.096-33.007 44.623 10.606 90.778 22.59 23.907 57.666 49.729 84.403 67.97 16.342-4.277 33.021-7.036 49.338-8.797zm46.617-176.651-26.896-63.322a16.28 16.28 0 0 1 .248-13.284 16.285 16.285 0 0 1 10.063-8.676l117.39-35.176a16.275 16.275 0 0 1 13.09 1.659 16.28 16.28 0 0 1 7.561 10.814l26.739 136.862a16.82 16.82 0 0 1 .173 1.072c5.404 14.505-5.435 34.481-25.776 46.225-21.855 12.618-46.457 10.985-54.903-3.645s2.44-36.752 24.295-49.37c6.731-3.887 13.723-6.421 20.425-7.641l-19.464-99.631-82.762 24.801 28.707 67.584a16.303 16.303 0 0 1 1.117 3.939c6.493 14.584-4.376 35.355-25.285 47.427-21.856 12.618-46.457 10.985-54.904-3.645s2.44-36.752 24.295-49.37c5.226-3.017 10.609-5.22 15.887-6.623z"})))};const i='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1080 1080" fill-rule="evenodd"\n     stroke-linejoin="round" stroke-miterlimit="2">\n    <path d="M592.265 470.55c-20.047-.319-38.048.176-52.263.176h-.004c-14.215 0-32.216-.495-52.261-.176-17.723-10.982-53.501-37.388-72.145-80.758-14.428-33.563-24.106-61.379-36.711-79.831-15.816-23.151-35.498-34.601-69.354-29.222-16.637 2.642-33.045 12.088-46.071 26.691-28.142 31.546-40.977 87.562-3.838 141.709 16.956 24.721 45.235 42.363 75.276 54.42-47.412 27.244-75.95 72.203-86.109 127.629-16.644 90.807 25.192 155.58 75.307 197.187 46.396 38.519 114.729 69.158 215.806 69.784l-.15-.005h.504l-.15.005c101.077-.626 169.41-31.265 215.806-69.784 50.115-41.607 91.952-106.38 75.307-197.187-10.159-55.426-38.697-100.385-86.108-127.628 30.042-12.058 58.321-29.7 75.277-54.421 37.139-54.147 24.304-110.163-3.838-141.709-13.026-14.603-29.434-24.049-46.071-26.691-33.856-5.379-53.538 6.071-69.354 29.222-12.605 18.452-22.283 46.268-36.711 79.831-18.644 43.37-54.422 69.776-72.145 80.758zm9.057 96.811l7.257-28.92c2.734-10.894-3.891-21.958-14.785-24.691s-21.958 3.891-24.691 14.785l-7.877 31.391a211.13 211.13 0 0 1-21.225 52.938 211.13 211.13 0 0 1-21.225-52.938l-7.877-31.391c-2.221-8.851-9.941-14.884-18.601-15.369l-1.003-.031a20.35 20.35 0 0 0-5.087.615c-10.894 2.733-17.519 13.797-14.785 24.691l7.257 28.92c24.749 16.308 41.097 44.35 41.097 76.181 0 50.317-40.851 91.168-91.168 91.168s-91.168-40.851-91.168-91.168 40.851-91.168 91.168-91.168a91 91 0 0 1 26.371 3.88c-6.214-12.16-15.449-23.71-28.939-28.208-32.329-10.78-74.18-5.365-115.225 50.487-38.357 52.193-26.981 126.591 18.791 180.196 44.956 52.649 107.783 82.754 210.394 82.448 102.611.306 165.438-29.799 210.394-82.448 45.772-53.605 57.148-128.003 18.791-180.196-41.045-55.852-82.896-61.267-115.225-50.487-13.49 4.498-22.725 16.048-28.939 28.208a91 91 0 0 1 26.371-3.88c50.317 0 91.168 40.851 91.168 91.168s-40.851 91.168-91.168 91.168-91.168-40.851-91.168-91.168c0-31.831 16.348-59.873 41.097-76.181zm-94.991 202.564c-8.501-15.787-4.855-35.363 8.758-47.031a.36.36 0 0 0 .021-.019c14.324-12.277 35.46-12.277 49.784 0 .007.007.014.013.021.019 13.613 11.668 17.259 31.244 8.758 47.031l-21.615 40.142a13.69 13.69 0 0 1-24.112 0l-21.615-40.142zm84.521-122.913l2.047-3.066a69.52 69.52 0 0 1 62.281-30.745c24.702 1.596 46.687 16.207 57.73 38.356a16.2 16.2 0 0 1 1.791 7.427 16.29 16.29 0 0 1-16.28 16.28c-6.464 0-12.053-3.775-14.68-9.238-5.879-11.742-17.55-19.486-30.661-20.333-13.163-.851-25.781 5.378-33.109 16.345a4.38 4.38 0 0 1-.864.962c-2.601 5.535-8.228 9.37-14.743 9.37a16.29 16.29 0 0 1-16.28-16.28 16.2 16.2 0 0 1 2.768-9.078zm-223.76 4.545c11.039-22.146 33.025-36.76 57.73-38.356a69.52 69.52 0 0 1 62.281 30.745l.863 1.517a16.21 16.21 0 0 1 3.952 10.627 16.29 16.29 0 0 1-16.28 16.28c-6.214 0-11.62-3.489-14.364-8.614a28.18 28.18 0 0 1-1.242-1.718c-7.329-10.967-19.947-17.196-33.11-16.345-13.111.847-24.782 8.591-30.661 20.333-2.627 5.463-8.216 9.238-14.68 9.238a16.29 16.29 0 0 1-16.28-16.28 16.2 16.2 0 0 1 1.791-7.427zm324.444-169.342c26.738-18.241 61.814-44.063 84.404-67.97 43.613-46.155 16.513-83.682 10.606-90.778-6.432-5.573-13.684-9.381-21.179-10.572-8.894-1.412-16.035-1.075-21.987 1.423-9.37 3.933-15.359 12.718-21.416 24.176-8.84 16.725-16.714 38.739-27.641 64.157-13.125 30.531-33.39 53.993-52.124 70.767 16.318 1.762 32.996 4.52 49.337 8.797zm-253.733-8.797c-18.739-16.78-39.001-40.239-52.124-70.767-10.927-25.418-18.801-47.432-27.641-64.157-6.057-11.458-12.046-20.243-21.416-24.176-5.952-2.498-13.093-2.835-21.987-1.423-7.495 1.191-14.747 4.999-21.179 10.572-5.907 7.096-33.007 44.623 10.606 90.778 22.59 23.907 57.666 49.729 84.403 67.97 16.342-4.277 33.021-7.036 49.338-8.797zm46.617-176.651l-26.896-63.322a16.28 16.28 0 0 1 .248-13.284c1.968-4.191 5.628-7.346 10.063-8.676l117.39-35.176c4.402-1.32 9.157-.717 13.09 1.659a16.28 16.28 0 0 1 7.561 10.814l26.739 136.862a16.82 16.82 0 0 1 .173 1.072c5.404 14.505-5.435 34.481-25.776 46.225-21.855 12.618-46.457 10.985-54.903-3.645s2.44-36.752 24.295-49.37c6.731-3.887 13.723-6.421 20.425-7.641l-19.464-99.631-82.762 24.801 28.707 67.584c.548 1.291.917 2.614 1.117 3.939 6.493 14.584-4.376 35.355-25.285 47.427-21.856 12.618-46.457 10.985-54.904-3.645s2.44-36.752 24.295-49.37c5.226-3.017 10.609-5.22 15.887-6.623z"/>\n</svg>'},2740:(e,t,n)=>{n.r(t),n.d(t,{APP_AUTHOR:()=>l,APP_HOMEPAGE:()=>o,APP_PLATFORM:()=>r,APP_VERSION:()=>a});const[a,o,l,r]=["3.3.0","https://github.com/wardellbagby/lyricistant","Wardell Bagby","Web"]},7431:(e,t,n)=>{n.r(t);var a=n(2070),o=n(2740),l=n(5383),r=n(8519),i=n(9892),s=n(8120),c=n(6485),d=n(9119),m=n(5524),u=n(3105);const p="/".charCodeAt(0),g="\n".charCodeAt(0),f=new u.Jq((e=>{let t=e.peek(0),n=e.peek(1);if(-1!==t&&t!==g)for(;;){if(t===p&&n===p)return void e.acceptToken(y);if(n===g||-1===n)return void e.acceptToken(y,1);t=e.advance(),n=e.peek(1)}})),h=u.WQ.deserialize({version:14,states:"nQVQROOOOQQ'#Cf'#CfOOQQ'#Cb'#CbQVQROOOOQQ-E6`-E6`",stateData:"j~OXOS~OPPORPOSPOTPO~OSRXR~",goto:"fZPPPPPP[PPPbQRORSRTQOR",nodeNames:"âš  Lyric Lyrics LineComment TodoComment Context",maxTerm:10,skippedNodes:[0],repeatNodeCount:1,tokenData:")k~R[X^wpqw!P!Q!l!}#O(W#y#zw$f$gw#BY#BZw$IS$I_w$I|$JOw$JT$JUw$KV$KWw&FU&FVw~|YX~X^wpqw#y#zw$f$gw#BY#BZw$IS$I_w$I|$JOw$JT$JUw$KV$KWw&FU&FVw~!oP!P!Q!r~!wYR~OY#gZp#gpq$Oq!v#g!v!w$m!w#h#g#h#i&o#i;'S#g;'S;=`#x<%lO#g~#lSR~OY#gZ;'S#g;'S;=`#x<%lO#g~#{P;=`<%l#g~$TWR~OY#gZ!v#g!v!w$m!w#h#g#h#i&o#i;'S#g;'S;=`#x<%lO#g~$rUR~OY#gZ!q#g!q!r%U!r;'S#g;'S;=`#x<%lO#g~%ZUR~OY#gZ!f#g!f!g%m!g;'S#g;'S;=`#x<%lO#g~%rUR~OY#gZ!q#g!q!r&U!r;'S#g;'S;=`#x<%lO#g~&]SS~R~OY&UZ;'S&U;'S;=`&i<%lO&U~&lP;=`<%l&U~&tUR~OY#gZ#c#g#c#d'W#d;'S#g;'S;=`#x<%lO#g~']UR~OY#gZ#W#g#W#X'o#X;'S#g;'S;=`#x<%lO#g~'tUR~OY#gZ#c#g#c#d&U#d;'S#g;'S;=`#x<%lO#g~(ZSOY(gZ;'S(g;'S;=`)e<%lO(g~(jUOY(gZ#P(g#P#Q(|#Q;'S(g;'S;=`)e<%lO(g~)RUT~OY(gZ#P(g#P#Q(|#Q;'S(g;'S;=`)e<%lO(g~)hP;=`<%l(g",tokenizers:[0,f],topRules:{Lyrics:[0,2]},tokenPrec:21}),y=1,x=m.Vp.define(),E=m.Vp.define(),v=d.qp.define({parser:h.configure({props:[(0,m.Gv)({LineComment:m.pJ.lineComment,TodoComment:x,Context:E})]}),languageData:{commentTokens:{line:"//"}}});var b=n(2734),k=n(9913),w=n(4337),C=n(532),Z=n(7294);const S=e=>({"&::selection":{backgroundColor:e.palette.primary.main,color:e.palette.getContrastText(e.palette.primary.main)}}),T=["LineComment","TodoComment","Context"],O=(e,t,n)=>P(e,t,n).filter((e=>!T.find((t=>t===e.type.name)))),P=(e,t,n)=>{const a=[],o=(0,d.qz)(e).cursorAt(t,1);let l=t;for(;l<n;){let e=!0;if(o.node.to<=n&&o.node.from>=t&&(a.push(o.node),e=!1),!o.next(e))return a;l=o.from}return a};var D=n(8766),R=n.n(D);const L=["Type your lyrics...","Write your epic...","Show me your poetry...","Jot down your thoughts...","Input musings here...","Pen your next masterpiece...","Let's write some rhymes...","Let's start your song...","Tell me your story...","Speak (err, write?) your mind...","Let me assist your lyrics...","Create your next classic...","Let's make your magnum opus...","What do you want to write today?","Put your feelings to words..."],A=c.p.mark({class:"cm-mark"}),I=s.Py.define({map:(e,t)=>e?{from:t.mapPos(e.from),to:t.mapPos(e.to)}:null}),F=(e,t)=>e.value&&e.value.from<t.length&&e.value.to<=t.length&&e.value.to-e.value.from>0,j=s.QQ.define({create:()=>c.p.none,update(e,t){for(const e of t.effects){if(e.is(I)&&F(e,t.state.doc))return s.Xs.of(A.range(e.value.from,e.value.to));if(e.is(I)&&!e.value)return c.p.none}return e.map(t.changes)},provide:e=>c.tk.decorations.from(e)}),M=e=>{const[t,n]=(0,Z.useState)(null),[a,o]=(0,Z.useState)(null),[u,p]=(0,Z.useState)(0),g=(0,b.Z)(),f=(0,Z.useMemo)((()=>new s.F6),[]),h=(0,Z.useMemo)((()=>new s.F6),[]),y=(0,Z.useMemo)((()=>new s.F6),[]),T=(0,Z.useMemo)((()=>new s.F6),[]),D=(0,Z.useMemo)((()=>((e,t)=>[(0,d.nF)(d.Qf.define([Object.assign({tag:m.pJ.lineComment,color:e.palette.text.disabled},S(e)),Object.assign({tag:[x,E],color:e.palette.primary.main},S(e))])),c.tk.theme({"&.cm-editor":{backgroundColor:e.palette.background.default,caretColor:e.palette.text.primary,height:"100%"},"&.cm-scroller":{overflow:"auto"},"&.cm-focused":{outline_fallback:"none !important",outline:"none !important"},".cm-line-widget":{color:e.palette.text.disabled,borderColor:e.palette.text.disabled},".cm-line":Object.assign({color:e.palette.text.primary},S(e)),".cm-mark":Object.assign({borderBottom:`2px solid ${e.palette.primary.main}55`},S(e)),".cm-scroller":{fontFamily:`"${t}"`,fontSize:`${e.typography.fontSize}px`,paddingTop:"16px",paddingBottom:"16px",paddingLeft:"8px",paddingRight:"8px"},".cm-gutters":{width:"60px",justifyContent:"center",backgroundColor:e.palette.background.default,color:e.palette.text.secondary,borderRight:"none"},".cm-panel":{backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper)},".cm-searchMatch":{backgroundColor:e.palette.grey.A100,color:e.palette.getContrastText(e.palette.grey.A100)},".cm-searchMatch.selected":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},".cm-button":{background:e.palette.primary.main,color:e.palette.primary.contrastText,border:"none",borderRadius:"0px",margin:"2px",padding:"8px",width:"100px",height:"35px",textAlign:"center",textDecoration:"none",display:"inline-block",fontFamily:'"Roboto"',fontSize:e.typography.fontSize,"&:focus":{outline:"none"},"&:active":{background:e.palette.action.active}},".cm-textfield":{color:e.palette.text.primary,padding:"8px",width:"150px",height:"35px",textDecoration:"none",fontFamily:'"Roboto"',fontSize:e.typography.fontSize,"&:focus":{outline:"none"}},".cm-panel label":{display:"none",fontFamily:'"Roboto"',fontSize:e.typography.fontSize},".cm-panel.cm-search [name=select]":{display:"none"},".cm-panel.cm-search [name=close]":{fontSize:"24px",right:"8px","&:focus":{outline:"none"},color:e.palette.text.primary}},{dark:"dark"===e.palette.mode})])(g,e.font)),[g.palette,g.typography,e.font]),A=(0,Z.useMemo)((()=>{return t=e.onTextChanged,c.tk.updateListener.of((e=>{(e.docChanged||e.selectionSet)&&t(e.state.doc,e.state.selection.main.from)}));var t}),[e.onTextChanged]),F=(0,Z.useMemo)((()=>{return t=e.onTextSelected,[c.tk.updateListener.of((e=>{if(e.selectionSet){const n=e.state.selection.asSingle().main;let a;if(n.empty){const{from:t,to:o}=e.state.doc.lineAt(n.from);a=O(e.state,t,o)}else a=O(e.state,n.from,n.to);a.find((e=>((e,t)=>e.from<=t.to&&e.to>=t.to)(e,n)))&&t(((e,t)=>{const n=e.lineAt(t.head),a=e=>/[^\w\-']+/.exec(e);let o,l;for(t.empty?1===t.assoc?(o=t.from-n.from,l=t.from+1-n.from):(o=t.from-1-n.from,l=t.from-n.from):(o=t.from-n.from,l=t.to-n.from);o>=0&&!a(n.text[o]);)o-=1;for(o=Math.max(0,o+1);l<n.length&&!a(n.text[l]);)l+=1;return l=Math.max(o,l),{from:o+n.from,to:l+n.from,text:n.text.substring(o,l)}})(e.state.doc,n))}}))];var t}),[e.onTextSelected]),M=(0,Z.useMemo)((()=>{return t=e.onFileDropped,c.tk.domEventHandlers({drop:e=>{var n,a,o,l,r,i,s,c;e.stopPropagation(),e.preventDefault(),((null===(a=null===(n=e.dataTransfer)||void 0===n?void 0:n.items)||void 0===a?void 0:a.length)>0||(null===(l=null===(o=e.dataTransfer)||void 0===o?void 0:o.files)||void 0===l?void 0:l.length)>0)&&t((null===(i=null===(r=e.dataTransfer)||void 0===r?void 0:r.items)||void 0===i?void 0:i[0])||(null===(c=null===(s=e.dataTransfer)||void 0===s?void 0:s.files)||void 0===c?void 0:c[0]))}});var t}),[e.onFileDropped]);(0,Z.useEffect)((()=>{if(!t)return;const n=[];e.markedText&&e.markedText.to!==e.markedText.from?n.push(I.of(e.markedText)):n.push(I.of(null)),t.dispatch({effects:n})}),[e.markedText,t]);const z=(0,Z.useMemo)((()=>({extensions:[new d.ri(v),(0,c.Eu)({formatNumber:(e,t)=>{if(e>t.doc.lines)return"0";const{from:n,to:a}=t.doc.line(e),o=P(t,n,a),l=O(t,n,a);if(0===o.length)return"0";if(0===l.length)return" ";const r=((e,t)=>t.map((t=>e.sliceDoc(t.from,t.to))).join(" "))(t,l);return R()(r).toString()}}),(0,l.m8)(),c.tk.lineWrapping,(0,c.W$)((0,C.Z)(L)),f.of(D),h.of(A),y.of(F),T.of(M),j,c.$f.of([...l.wQ,...l.f$,...i.Lp]),(0,r.ir)((()=>[]),{delay:0,tooltipFilter:()=>[]})]})),[g,D,A,F,M,u]);(0,Z.useEffect)((()=>{if(!a)return;const t=new c.tk({parent:a});return t.setState(s.yy.create(Object.assign(Object.assign({},z),{doc:e.text}))),n(t),()=>{a||(n(null),t.destroy())}}),[a]),(0,Z.useEffect)((()=>()=>{t&&(t.destroy(),n(void 0))}),[t]),(0,Z.useEffect)((()=>{var n;const a=t?t.state.doc:s.xv.empty;t&&!e.text.eq(a)&&t.dispatch({changes:{from:0,to:a.length,insert:null!==(n=e.text)&&void 0!==n?n:s.xv.empty}})}),[e.text,t]),(0,Z.useEffect)((()=>{t&&void 0!==e.cursorPosition&&t.state.selection.main.empty&&t.state.selection.main.anchor!==e.cursorPosition&&t.dispatch({selection:{anchor:e.cursorPosition}})}),[e.cursorPosition,t]);const N=(0,Z.useMemo)((()=>[{compartment:f,extension:D},{compartment:h,extension:A},{compartment:y,extension:F},{compartment:T,extension:M}]),[f,D,h,A,y,F,T,M]);((e,t)=>{const[n,a]=(0,Z.useState)([]);(0,Z.useLayoutEffect)((()=>{if(!e)return;const o=(0,k.Z)(t,n,w.Z);o.length>0&&(e.dispatch({effects:o.map((({compartment:e,extension:t})=>e.reconfigure(t)))}),a(t))}),t)})(t,N),(0,Z.useEffect)((()=>{a&&Array.from(a.getElementsByClassName("cm-content")).forEach((e=>{e.setAttribute("autocapitalize","on")}))}),[a]);const $=(0,Z.useCallback)((()=>(p((e=>e+1)),null==t?void 0:t.setState(s.yy.create(Object.assign(Object.assign({},z),{doc:e.text}))))),[t,z,e.text]),_=(0,Z.useCallback)((()=>(0,l.Yw)(t)),[t]),V=(0,Z.useCallback)((()=>(0,l.KX)(t)),[t]),U=(0,Z.useCallback)((()=>(0,i.nx)(t)),[t]);return(0,Z.useEffect)((()=>{(null==t?void 0:t.state)&&t.dispatch((0,r.p0)(t.state,e.diagnostics))}),[e.diagnostics,null==t?void 0:t.state]),{view:t,isModified:!!(null==t?void 0:t.state)&&0!==(0,l.of)(t.state),resetHistory:$,undo:_,redo:V,openFindReplaceDialog:U,setContainer:o}};var z=n(3838),N=n(7645),$=n(1508),_=n(2658),V=n(1079),U=n(8979),B=n(6914);function W({error:e,editorText:t}){const n=(0,Z.useCallback)((()=>window.location.reload()),[]),a=(0,Z.useCallback)((()=>window.navigator.clipboard.writeText(t)),[]),o=(0,Z.useCallback)((()=>{platformDelegate.send("save-logs")}),[]);return(0,Z.useEffect)((()=>{logger.error("Error in renderer",e.toString())}),[e]),Z.createElement(z.Z,{onClose:n,open:!0},Z.createElement(N.Z,null,"Application error"),Z.createElement($.Z,{paddingLeft:"32px",paddingRight:"32px",paddingBottom:"24px"},Z.createElement(_.Z,{paragraph:!0},"Sorry, an error has occurred in Lyricistant. Press reload to continue, but any unsaved data may be lost. You can also copy your current lyrics to the clipboard, and attempt to download logs."),Z.createElement(V.Z,{href:"https://github.com/wardellbagby/lyricistant/issues/new/choose",rel:"noopener",variant:"body1"},"Click here to report an issue.")),Z.createElement(U.Z,null,Z.createElement(B.Z,{variant:"text",onClick:o},"Download logs"),Z.createElement(B.Z,{variant:"text",onClick:a},"Copy lyrics"),Z.createElement(B.Z,{variant:"text",color:"warning",onClick:n},"Reload")))}var H=n(4588),G=n(6926),q=n(7750),Q=n(5725),Y=n(7896),J=n(9573),K=n(8732),X=n(3694);const ee={"Code repository":Z.createElement(V.Z,{target:"_blank",rel:"noopener",href:o.APP_HOMEPAGE},"GitHub"),"My website":Z.createElement(V.Z,{target:"_blank",rel:"noopener",href:"https://wardellbagby.com"},"wardellbagby.com"),"Report an issue":Z.createElement(V.Z,{target:"_blank",rel:"noopener",href:"https://github.com/wardellbagby/lyricistant/issues/new"},"Issues")},te=e=>Z.createElement(G.Z,Object.assign({sx:{borderBottom:"none"}},e)),ne=e=>{const t=(0,b.Z)();return Z.createElement(z.Z,{onClose:e.onClose,open:e.open,className:"paper",scroll:"paper"},Z.createElement(q.Z,null,Z.createElement(Q.ZP,{container:!0,spacing:1,direction:"column",justifyContent:"center",alignItems:"center"},Z.createElement(Q.ZP,{item:!0,xs:12},Z.createElement(H.r,{height:"96px",width:"96px",fill:t.palette.primary.main})),Z.createElement(Q.ZP,{item:!0,xs:12},Z.createElement(_.Z,{variant:"h6"},"Lyricistant - ",o.APP_VERSION)),Z.createElement(Q.ZP,{item:!0,xs:8},Z.createElement("p",null,"Hey! I'm Wardell, and I created Lyricistant! This app is completely free to use and entirely open-source. Make your own modifications, just make sure to make them open-source as well!"),Z.createElement("p",null,"I use Lyricistant personally to write my own music, which I'd love for you to listen to! Catch me on"," ",Z.createElement(V.Z,{target:"_blank",rel:"noopener",href:"https://open.spotify.com/artist/5NaXw8enpDRFxiTcB0J6H5"},"Spotify"),","," ",Z.createElement(V.Z,{target:"_blank",rel:"noopener",href:"https://music.apple.com/us/artist/mr-chandler/1331569890"},"Apple Music"),", or peep my"," ",Z.createElement(V.Z,{target:"_blank",rel:"noopener",href:"https://soundcloud.com/mr-chandler"},"SoundCloud.")),Z.createElement("p",null,"Enjoy using Lyricistant!")),Z.createElement(Q.ZP,{item:!0,xs:12},Z.createElement(Y.Z,null,Z.createElement(J.Z,{size:"small"},Z.createElement(K.Z,null,Object.keys(ee).map((e=>[e,ee[e]])).map((([e,t])=>Z.createElement(X.Z,{key:e},Z.createElement(te,null,e),Z.createElement(te,null,t)))))))),Z.createElement($.Z,{height:"8px"}),Z.createElement(Q.ZP,{item:!0,xs:12},Z.createElement(B.Z,{variant:"outlined",onClick:()=>platformDelegate.send("save-logs")},"Download logs")))),Z.createElement(U.Z,null,Z.createElement(B.Z,{fullWidth:!0,variant:"contained",onClick:e.onClose},"Close")))};var ae=n(7498);const oe=()=>{const e=(0,ae.TH)()[1];return(t,n)=>{e(t.replace("/",""),n)}},le=[{platform:"Mac",asset:"lyricistant-mac_x64.dmg"},{platform:"Windows",asset:"lyricistant-win.exe"},{platform:"iOS",url:"https://apps.apple.com/om/app/lyricistant/id1561506174"},{platform:"Android",url:"https://play.google.com/store/apps/details?id=com.wardellbagby.lyricistant"},{platform:"Linux",asset:"lyricistant-linux_x86_64.AppImage",arch:"x64"},{platform:"Linux",asset:"lyricistant-linux_arm64.AppImage",arch:"arm64"}];var re=n(7582),ie=n(2638),se=n(1249),ce=n.n(se);class de{constructor(e){this.logger=e,this.cachedReleases=[],this.getLatestDownloadableRelease=(e,t={includeCurrentVersion:!1})=>(0,re.mG)(this,void 0,void 0,(function*(){var n;if(a.K)return null;this.logger.debug("Checking for new GitHub releases",{currentVersion:e});const o=yield this.getGitHubReleases(e,null!==(n=t.includeCurrentVersion)&&void 0!==n&&n);if(0===o.length)return null;const l=o[0];return this.logger.debug("Newest available release",{tag:l.tag_name}),{baseDownloadUrl:this.getBaseDownloadUrl(l),changelog:this.getChangelog(o)}})),this.getGitHubReleases=(e,t)=>(0,re.mG)(this,void 0,void 0,(function*(){if(this.cachedReleases.length>0)return this.logger.debug("Returning cached releases",{releases:this.cachedReleases}),this.cachedReleases;try{const n=yield this.octokit.rest.repos.listReleases(de.LYRICISTANT_REPO);for(const a of n.data)if("latest"!==a.tag_name){if(!t&&!this.isReleaseNewerThanCurrent(e,a))break;a.assets.some((e=>"latest.yml"===e.name))&&this.cachedReleases.push(a)}return this.cachedReleases}catch(e){return this.logger.warn("Failed to load releases",e),this.cachedReleases=[],this.cachedReleases}})),this.isReleaseNewerThanCurrent=(e,t)=>{const n=ce().coerce(e),a=ce().coerce(t.tag_name);return n&&a?ce().gt(a,n):(this.logger.warn("Failed to compare versions",{current:n,next:a,currentVersionString:e,releaseTag:t.tag_name}),!1)},this.getBaseDownloadUrl=e=>this.removeFilename(e.assets[0].browser_download_url),this.getChangelog=e=>e.reduce(((e,t)=>`##${t.name}\n\n${t.body}\n\n${e}`),""),this.removeFilename=e=>e.substring(0,e.lastIndexOf("/")+1),this.octokit=new ie.v}static get[Symbol.for("___CTOR_ARGS___")](){return["Logger"]}}de.LYRICISTANT_REPO={owner:"wardellbagby",repo:"lyricistant"};var me=n(9122),ue=n(2494);let pe=null;const ge=(0,me.C)({id:"latest-release",initial:"inactive",context:{releaseData:null},on:{INPUT:[{target:".loading"}]},states:{inactive:{},loading:{invoke:{src:(e,t)=>(0,re.mG)(void 0,void 0,void 0,(function*(){return(pe||(pe=new de(logger),pe)).getLatestDownloadableRelease(t.currentVersion,{includeCurrentVersion:!0})})),onDone:[{target:"loaded",cond:(e,t)=>null!=t.data,actions:(0,ue.f0)({releaseData:(e,t)=>t.data})},{target:"error"}],onError:{target:"error",actions:(0,ue.f0)({releaseData:()=>null})}}},loaded:{id:"loaded"},error:{id:"error"}}});var fe=n(956),he=n(1820),ye=n(7425),xe=n(5092),Ee=n(9062),ve=n(6408),be=n(7861),ke=n(8407),we=n(4186),Ce=n(1177),Ze=n(931);const Se=({platform:e})=>{switch(e){case"Linux":return"#0099cc";case"Android":return"#3DDC84";case"Mac":case"iOS":return"#555555";case"Windows":return"#00A4EF"}},Te=e=>{const t=(0,Z.useMemo)((()=>e.releases.map((t=>Z.createElement(Q.ZP,{key:`${t.platform}/${t.asset}/${t.url}`,item:!0,xs:6},Z.createElement(Pe,{release:t,onClick:()=>{e.onClick(t)}}))))),[e.releases,e.onClick]);return e.releases.length>1?Z.createElement(Q.ZP,{item:!0,container:!0,xs:12,spacing:1,alignItems:"center",justifyContent:"center"},Z.createElement(Q.ZP,{item:!0,xs:12},Z.createElement(he.Z,{key:e.platform+"accordion",sx:{padding:"0px",boxShadow:"unset"}},Z.createElement(ye.Z,{sx:{padding:"0px"}},Z.createElement($.Z,{padding:"8px",width:"100%"},Z.createElement(B.Z,{sx:{background:Se(e.releases[0]),color:Oe(e.releases[0]),textTransform:"none"},variant:"contained",fullWidth:!0,startIcon:Z.createElement(Le,{platform:e.platform}),size:"large"},e.platform))),Z.createElement(xe.Z,null,Z.createElement(Q.ZP,{container:!0},t))))):Z.createElement(Z.Fragment,null,t)},Oe=({platform:e})=>{switch(e){case"Mac":case"iOS":return"#FFFFFF";case"Windows":case"Linux":case"Android":return"#000000"}},Pe=e=>{const{release:t,onClick:n}=e;return Z.createElement($.Z,{padding:"8px"},Z.createElement(B.Z,{sx:{background:Se(t),color:Oe(t),textTransform:"none"},variant:"contained",fullWidth:!0,startIcon:Z.createElement(Le,Object.assign({},t)),size:"large",onClick:n},(({platform:e,arch:t})=>{switch(e){case"Linux":return`${e} - ${t}`;case"iOS":return"iPhone / iPad";default:return e}})(t)))},De=e=>{var t;const[n,a]=(0,be.e)(ge);(0,Z.useEffect)((()=>{e.open&&a({type:"INPUT",currentVersion:o.APP_VERSION})}),[e.open]);const l=(0,Z.useCallback)((t=>{var a;const o=null!==(a=t.url)&&void 0!==a?a:n.context.releaseData.baseDownloadUrl+t.asset;logger.info(`App download link clicked. Chosen URL: ${o}`),window.open(o,"_blank"),e.onClose()}),[null===(t=n.context.releaseData)||void 0===t?void 0:t.baseDownloadUrl]),r=(0,Z.useMemo)((()=>le.reduce(((e,t)=>{var n;const a=null!==(n=e.get(t.platform))&&void 0!==n?n:[];return e.set(t.platform,[...a,t]),e}),new Map)),[]);return Z.createElement(z.Z,{onClose:e.onClose,"aria-labelledby":"choose-download-dialog-title",open:e.open},Z.createElement(N.Z,{id:"choose-download-dialog-title"},"Download Lyricistant"),Z.createElement(q.Z,null,n.matches("loading")&&Z.createElement($.Z,{display:"flex",alignItems:"center",justifyContent:"center"},Z.createElement(Ee.Z,{size:"64px",variant:"indeterminate"})),n.matches("loaded")&&Z.createElement(Re,{releases:r,onReleaseClicked:l}),n.matches("error")&&Z.createElement(ve.Z,null,"Failed to fetch latest download information. Please try again later.")),Z.createElement(B.Z,{size:"large",variant:"contained",fullWidth:!0,onClick:e.onClose},"Close"))},Re=e=>Z.createElement(Q.ZP,{container:!0,spacing:1,alignItems:"center",justifyContent:"center"},[...e.releases.keys()].map((t=>Z.createElement(Te,{key:t,platform:t,releases:e.releases.get(t),onClick:t=>e.onReleaseClicked(t)})))),Le=({platform:e})=>{switch(e){case"Linux":return Z.createElement(ke.Z,null);case"Mac":return Z.createElement(we.Z,null);case"Windows":return Z.createElement(Ce.Z,null);case"Android":return Z.createElement(fe.Z,null);case"iOS":return Z.createElement(Ze.Z,null)}};var Ae=n(8396);const Ie=()=>{const e=(0,b.Z)();return(0,Ae.Z)(e.breakpoints.down("md"))},Fe=(e,t,n)=>{(0,Z.useEffect)((()=>(platformDelegate.on(e,t),()=>{platformDelegate.removeListener(e,t)})),null!=n?n:[])},je=(e,t)=>{const[n,a]=(0,Z.useState)([]);return(0,Z.useEffect)((()=>{if(!1===t)return;const n=(...e)=>{a(e)};return platformDelegate.on(e,n),()=>{platformDelegate.removeListener(e,n)}}),[t]),n};var Me=n(7952),ze=n(9334),Ne=n(2440),$e=n(7720),_e=n(7049);const Ve=({data:e,onClick:t})=>Z.createElement(Me.ZP,{button:!0,onClick:t},Z.createElement(ze.Z,{primary:e.time})),Ue=e=>{const t=(0,b.Z)(),{backgroundColor:n,foregroundColor:a}=(0,Z.useMemo)((()=>"new"===e.line.type?{backgroundColor:t.palette.success.main,foregroundColor:t.palette.success.contrastText}:"old"===e.line.type?{backgroundColor:t.palette.error.main,foregroundColor:t.palette.error.contrastText}:{}),[t]),o=(0,Z.useMemo)((()=>{if(e.line.control)return"monospace"}),[e.line.control]);return Z.createElement($.Z,{sx:{background:n,color:a,fontFamily:o}},e.line.line)},Be=e=>Z.createElement($.Z,{marginBottom:"12px",padding:"12px",sx:{border:2,borderRadius:1,borderColor:e=>e.palette.divider}},e.chunk.lines.map(((e,t)=>Z.createElement(Ue,{key:t,line:e})))),We=e=>{var t;return 0===(null===(t=e.historyData)||void 0===t?void 0:t.length)?Z.createElement(ve.Z,null,"No file history."):e.historyData?Z.createElement(Ne.Z,null,e.historyData.map(((t,n)=>Z.createElement(Z.Fragment,{key:n},Z.createElement(Ve,{data:t,onClick:()=>{e.onFileHistoryClicked(t)}}),Z.createElement($e.Z,null))))):Z.createElement($.Z,{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},Z.createElement(Ee.Z,{size:"48px",variant:"indeterminate"}))};function He(e){const t=(0,Z.useCallback)((()=>{o(null),e.onClose()}),[]),[n]=je("file-history",e.open),[a,o]=(0,Z.useState)(null),l=Ie()?"bottom":"right",r="right"===l?{width:"35%",maxWidth:"400px"}:{height:"50%",maxHeight:"500px"};return Z.createElement(Z.Fragment,null,Z.createElement(z.Z,{open:!!a,maxWidth:"md",onClose:()=>o(null)},Z.createElement(N.Z,null,null==a?void 0:a.time),Z.createElement($e.Z,null),Z.createElement(q.Z,null,null==a?void 0:a.chunks.map(((e,t)=>Z.createElement(Be,{key:t,chunk:e})))),Z.createElement(U.Z,null,Z.createElement(B.Z,{onClick:()=>o(null)},"Close"),Z.createElement(B.Z,{onClick:()=>{platformDelegate.send("apply-file-history",a),o(null),t()}},"Apply"))),Z.createElement(_e.ZP,{onClose:t,open:e.open,anchor:l,PaperProps:{sx:r}},Z.createElement(N.Z,null,"File history"),Z.createElement($e.Z,null),Z.createElement(q.Z,null,Z.createElement(We,{historyData:n,onFileHistoryClicked:o}))))}var Ge=n(6243);const qe=({text:e})=>Z.createElement(Ge.Z,{children:e,options:{disableParsingRawHTML:!0}});qe.displayName="Markdown";var Qe=n(6571),Ye=n(6514),Je=n(1796),Ke=n(7959),Xe=n(3797),et=n(3709),tt=n(542),nt=n(2887),at=n(9041);function ot(){const[e,t]=(0,Z.useState)(null),[n,a]=(0,Z.useState)(null),[o,l]=(0,Z.useState)(!1),r=(0,Z.useCallback)((t=>{l(!1),platformDelegate.send("dialog-interaction",e.tag,t),platformDelegate.send("dialog-closed",e.tag)}),[e]),i=(0,Z.useCallback)((()=>{l(!1),platformDelegate.send("dialog-closed",e.tag)}),[e]);return Fe("show-dialog",(e=>{t(e),l(!0)})),Fe("close-dialog",a),(0,Z.useEffect)((()=>{n&&n===(null==e?void 0:e.tag)&&(l(!1),a(null),platformDelegate.send("dialog-closed",e.tag))}),[n,e]),e?"alert"===e.type?Z.createElement(rt,{open:o,dialogData:e,onDialogInteraction:r}):"fullscreen"===e.type?Z.createElement(lt,{open:o,dialogData:e,onCancel:i}):"selection"===e.type?Z.createElement(it,{open:o,dialogData:e,onDialogInteraction:r,onClosed:i}):void 0:Z.createElement("div",null)}const lt=({open:e,dialogData:t,onCancel:n})=>Z.createElement(z.Z,{open:e,fullScreen:!0,sx:{overflow:"none"},TransitionComponent:Ye.Z,PaperProps:{sx:{backgroundColor:e=>(0,Je.Fq)(e.palette.background.paper,.5)}}},Z.createElement(q.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"48px"}},t.message&&Z.createElement(ve.Z,{variant:"h5"},t.message),t.progress&&("indeterminate"===t.progress?Z.createElement(Ee.Z,{size:"min(20vmin, 200px)",variant:"indeterminate"}):Z.createElement(st,{value:t.progress})),t.cancelable&&Z.createElement(B.Z,{variant:"outlined",onClick:n},"Cancel"))),rt=({open:e,dialogData:t,onDialogInteraction:n})=>Z.createElement(z.Z,{open:e,sx:{overflow:"none"}},Z.createElement(N.Z,null,t.title),Z.createElement(q.Z,null,t.message&&Z.createElement(ve.Z,null,t.message),t.collapsibleMessage&&Z.createElement(he.Z,{elevation:0,square:!0},Z.createElement(ye.Z,{expandIcon:Z.createElement(Qe.Z,null),sx:{paddingLeft:"0px",paddingRight:"0px"}},Z.createElement(ve.Z,null,t.collapsibleMessage.label)),Z.createElement(xe.Z,{sx:{overflowY:"auto",wordBreak:"break-word",maxHeight:"300px"}},Z.createElement(ve.Z,null,Z.createElement(qe,{text:t.collapsibleMessage.message})))),t.progress&&Z.createElement(st,{value:t.progress})),t.buttons&&Z.createElement(U.Z,null,t.buttons.map(((e,a)=>Z.createElement(B.Z,{key:e,onClick:()=>n({selectedButton:e}),color:"primary",variant:a===t.buttons.length-1?"contained":"text"},e))))),it=({open:e,dialogData:t,onDialogInteraction:n,onClosed:a})=>{const[o,l]=(0,Z.useState)(t.options[0]),[r,i]=(0,Z.useState)(!1);return Z.createElement(z.Z,{open:e},Z.createElement(N.Z,null,t.title),Z.createElement(q.Z,null,Z.createElement("p",null,t.message&&Z.createElement(ve.Z,null,t.message)),Z.createElement(Ke.Z,{value:o,fullWidth:!0,onChange:e=>l(e.target.value)},t.options.map((e=>Z.createElement(Xe.Z,{key:e,value:e},e)))),t.checkbox&&Z.createElement(et.Z,null,Z.createElement(tt.Z,{control:Z.createElement(nt.Z,{value:r,onChange:e=>{i(e.target.checked)}}),label:t.checkbox.label}))),Z.createElement(U.Z,null,Z.createElement(B.Z,{onClick:()=>a(),color:"primary",variant:"text"},"Cancel"),Z.createElement(B.Z,{onClick:()=>{n({selectedButton:"Confirm",selectedOption:o,checkboxes:{[t.checkbox.label]:r}})},color:"primary",variant:"contained"},"Confirm")))},st=e=>Z.createElement($.Z,{display:"flex",alignItems:"center",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"8px",paddingRight:"8px"},Z.createElement($.Z,{width:"100%",mr:1},Z.createElement(at.Z,Object.assign({variant:"determinate"},e))),Z.createElement($.Z,{minWidth:35},Z.createElement(_.Z,{variant:"body2",color:"textSecondary"},`${Math.round(e.value)}%`)));var ct=n(5527),dt=n(5537),mt=n(7835),ut=n(238),pt=n(4776),gt=n(6446),ft=n(7666),ht=n(3720),yt=n(4386),xt=n(6867),Et=n(6089),vt=n(4680);const bt=Z.forwardRef((function(e,t){return Z.createElement(pt.Z,Object.assign({direction:"up",ref:t},e))}));bt.displayName="DialogTransition";const kt=({label:e})=>Z.createElement("div",null,Z.createElement(_.Z,{sx:{fontWeight:"bolder"},variant:"h6"},e),Z.createElement($e.Z,{sx:{marginTop:"2px"}})),wt=({value:e,onChange:t,items:n,label:a})=>Z.createElement(gt.Z,{variant:"outlined",fullWidth:!0},Z.createElement(ft.Z,{sx:{marginLeft:"16px",marginRight:"16px"}},a),Z.createElement(Ke.Z,{sx:{marginLeft:"16px",marginRight:"16px"},value:e,onChange:e=>t(e.target.value),label:a},n.map((({label:e,value:t})=>Z.createElement(Xe.Z,{key:e,value:t},e))))),Ct=e=>{const[t]=je("prefs-updated",e.open),[n,a]=(0,Z.useState)(t);return(0,Z.useEffect)((()=>{a(t)}),[t]),n?Z.createElement(z.Z,{fullScreen:!0,sx:{color:e=>e.palette.primary.contrastText},open:e.open,TransitionComponent:bt,PaperProps:{sx:{background:e=>e.palette.background.default}}},Z.createElement(ht.Z,{color:"primary",position:"sticky",enableColorOnDark:!0},Z.createElement(yt.Z,null,Z.createElement(xt.Z,{color:"inherit",edge:"start",onClick:e.onClose,size:"large"},Z.createElement(dt.Z,null)),Z.createElement(_.Z,{variant:"h6",sx:{marginLeft:e=>e.spacing(2),flex:1}},"Preferences"),Z.createElement(xt.Z,{color:"inherit",onClick:()=>{platformDelegate.send("save-prefs",n),e.onClose()},size:"large","aria-label":"Save"},Z.createElement(mt.Z,null)))),Z.createElement(Et.Z,{maxWidth:"md",sx:{height:"100%"}},Z.createElement(vt.Z,{sx:{paddingTop:"32px",paddingBottom:"32px",paddingLeft:"32px",paddingRight:"32px"}},Z.createElement($.Z,{display:"flex",flexDirection:"column",gap:"24px"},Z.createElement(kt,{label:"Display"}),Z.createElement(wt,{value:n.font,onChange:e=>{a(Object.assign(Object.assign({},n),{font:e}))},items:[{value:ct.Zx.Roboto_Mono,label:"Roboto monospace"},{value:ct.Zx.Roboto,label:"Roboto"}],label:"Font"}),Z.createElement(wt,{value:n.textSize,onChange:e=>{a(Object.assign(Object.assign({},n),{textSize:e}))},items:[{value:8,label:"8"},{value:12,label:"12"},{value:16,label:"16 (Default)"},{value:20,label:"20"},{value:24,label:"24"},{value:28,label:"28"}],label:"Text size"}),Z.createElement(wt,{value:n.colorScheme,onChange:e=>{a(Object.assign(Object.assign({},n),{colorScheme:e}))},items:[{value:ct.eL.Light,label:"Light"},{value:ct.eL.Dark,label:"Dark"},{value:ct.eL.System,label:"Use device color scheme"}],label:"Color scheme"}),Z.createElement(wt,{value:n.detailPaneVisibility,onChange:e=>{a(Object.assign(Object.assign({},n),{detailPaneVisibility:e}))},items:[{value:ct.Li.Toggleable,label:"Show toggle button"},{value:ct.Li.Always_Show,label:"Always show"}],label:"Detail pane visibility"}),Z.createElement(kt,{label:"Other"}),Z.createElement(wt,{value:n.rhymeSource,onChange:e=>{a(Object.assign(Object.assign({},n),{rhymeSource:e}))},items:[{value:ct.OK.Offline,label:"Offline (alpha)"},{value:ct.OK.Datamuse,label:"Datamuse"}],label:"Rhyme source"}),Z.createElement(wt,{value:n.defaultFileType,onChange:e=>{a(Object.assign(Object.assign({},n),{defaultFileType:e}))},items:[{value:ct.gV.Always_Ask,label:"Always ask"},{value:ct.gV.Lyricistant_Lyrics,label:"Lyricistant file (.lyrics)"},{value:ct.gV.Plain_Text,label:"Plain text (.txt)"}],label:"Default file type"}),Z.createElement(B.Z,{variant:"text",startIcon:Z.createElement(ut.Z,null),size:"large",onClick:e.onAboutClicked,sx:{flexGrow:1}},"About Lyricistant"))))):Z.createElement("div",null)},Zt=e=>Z.createElement(z.Z,{onClose:e.onClose,open:e.open,className:"paper"},Z.createElement(N.Z,null,"Privacy policy"),Z.createElement(q.Z,null,Z.createElement(ve.Z,null,"Lyricistant doesn't collect or store any data from you. Nothing. Nada. Zilch. Zero."))),St=({path:e,render:t})=>{const[n]=(0,ae.TH)();return Z.createElement(Z.Fragment,null,t(e.replace("/","")===n))};function Tt(){const e=oe(),t=(()=>{const e=oe();return(0,Z.useCallback)((()=>{const t=window.history.state;!0===(null==t?void 0:t.internal)?window.history.back():e("/",{replace:!0})}),[])})();return(0,Z.useEffect)((()=>{logger.verbose("Navigation",location.pathname)}),[location]),Fe("open-about",(()=>e("/about")),[]),Fe("open-prefs",(()=>e("/preferences")),[]),Z.createElement(Z.Fragment,null,Z.createElement(St,{path:"/download",render:e=>Z.createElement(De,{open:e,onClose:t})}),Z.createElement(St,{path:"/about",render:e=>Z.createElement(ne,{open:e,onClose:t})}),Z.createElement(St,{path:"/privacypolicy",render:e=>Z.createElement(Zt,{open:e,onClose:t})}),Z.createElement(St,{path:"/file-history",render:e=>Z.createElement(He,{open:e,onClose:t})}),Z.createElement(St,{path:"/preferences",render:n=>Z.createElement(Ct,{open:n,onClose:t,onAboutClicked:()=>e("/about",{replace:!0})})}),Z.createElement(ot,null))}const Ot=({text:e,visible:t})=>{const n=(0,b.Z)();return Z.createElement($.Z,{height:"100%",width:"100%",overflow:"hidden",textOverflow:"ellipsis",fontStyle:"italic",p:"16px",display:!0===t?"flex":"none",flexWrap:"wrap-reverse",gap:"12px",alignItems:"center",justifyContent:"center",flexDirection:"column"},Z.createElement(H.r,{height:"96px",width:"96px",fill:n.palette.text.disabled}),Z.createElement(_.Z,{sx:{color:n.palette.text.disabled},variant:"body1"},e))};var Pt=n(2836),Dt=n(1385),Rt=n(7904),Lt=n(7932);const At=e=>"retext-spell"===e.source?`"${e.actual}" is misspelled`:e.message.replace(/`/g,'"'),It=e=>{let t,a;new Promise((e=>(0,re.mG)(void 0,void 0,void 0,(function*(){t=(yield n.e(805).then(n.bind(n,3805))).default,a=(yield n.e(417).then(n.bind(n,6974))).default,e({dic:t,aff:a})})))).catch((t=>e(t))).then((t=>e(null,t)))},Ft=(0,me.C)({id:"diagnostics",initial:"waiting",context:{result:[]},on:{INPUT:[{target:"loading",cond:"isValidInput",actions:[(0,ue.f0)({input:(e,t)=>t.input}),(0,ue.f0)({result:[]})]}]},states:{waiting:{id:"waiting"},loading:{initial:"debouncing",states:{debouncing:{on:{INPUT:[{target:"debouncing",cond:"isValidInput",actions:[(0,ue.f0)({input:(e,t)=>t.input}),(0,ue.f0)({result:[]})]},{target:"#diagnostics.waiting"}]},after:[{delay:"DEBOUNCE",target:"active"}]},active:{invoke:{src:e=>(0,re.mG)(void 0,void 0,void 0,(function*(){return t=e.input,(0,re.mG)(void 0,void 0,void 0,(function*(){return(e=>(0,re.mG)(void 0,void 0,void 0,(function*(){return e&&0!==e.length?((e,t)=>e.messages.map((e=>{const n=t.line(e.line),a=n.from+e.column-1;return{from:a,to:e.position?n.from+e.position.end.column-1:a,severity:e.fatal?"error":"warning",message:At(e),proposals:e.expected}})).sort(((e,t)=>e.from-t.from)))(yield(0,Pt.S)().use(Lt.Z,It).use(Rt.Z).use(Dt.Z).process(e.toString()),e):[]})))(t)}));var t})),onDone:[{target:"#displaying",cond:(e,t)=>Array.isArray(t.data)&&t.data.length>0,actions:(0,ue.f0)({result:(e,t)=>t.data})},{target:"#no-results",actions:(0,ue.f0)({result:(e,t)=>{var n;return null!==(n=t.data)&&void 0!==n?n:[]}})}],onError:{target:"#no-results",actions:[(0,ue.f0)({error:(e,t)=>t.data,result:[]}),e=>logger.warn("Failed to load diagnostics for text",e.error)]}}}}},displaying:{id:"displaying"},"no-results":{id:"no-results"}}},{delays:{DEBOUNCE:()=>a.K?100:1e3},guards:{isValidInput:(e,t)=>e.input!==t.input}});var jt=n(8046),Mt=n(8619),zt=n(5155),Nt=n(2206);const $t=e=>{const[t,n]=(0,be.e)(Ft);(0,Z.useEffect)((()=>{e.isVisible&&n({type:"INPUT",input:e.text})}),[e.text,e.isVisible]),(0,Z.useEffect)((()=>{var n;null===(n=e.onLoadingChanged)||void 0===n||n.call(e,t.matches("loading"))}),[t.matches("loading")]);const a=t.context.result;return(0,Z.useEffect)((()=>{e.onDiagnosticsLoaded(e.isVisible?a:[])}),[e.isVisible,a]),Z.createElement($.Z,{display:"flex",flexDirection:"column",gap:a.length>0?"8px":"0px",height:"100%",width:"100%"},Z.createElement(Ot,{visible:t.matches("waiting"),text:"Waiting for lyrics"}),Z.createElement(Ot,{visible:t.matches("no-results"),text:"No issues found"}),a.length>0&&Z.createElement(_t,{diagnostics:a,onDiagnosticClicked:e.onDiagnosticClicked,onProposalAccepted:e.onProposalAccepted}))},_t=e=>Z.createElement(Ne.Z,null,e.diagnostics.map((t=>Z.createElement(Vt,{key:JSON.stringify(t),diagnostic:t,onClick:()=>e.onDiagnosticClicked(t),onProposalClicked:n=>e.onProposalAccepted(n,t)})))),Vt=e=>{const t=(0,b.Z)();return Z.createElement(Me.ZP,{disablePadding:!0,onClick:e.onClick},Z.createElement(Mt.Z,{divider:!0,sx:{":hover":{backgroundColor:t.palette.background.paper}}},Z.createElement(ze.Z,{sx:{paddingRight:"8px"},primary:Z.createElement(qe,{text:e.diagnostic.message})}),Z.createElement(zt.Z,null,Z.createElement(xt.Z,{onClick:e.onClick},Z.createElement(jt.Z,null)))))},Ut=e=>{var t,n;return Z.createElement(Nt.ZP,{open:(null===(n=null===(t=e.diagnostic)||void 0===t?void 0:t.proposals)||void 0===n?void 0:n.length)>0,onClose:e.onClose,anchorEl:e.domRect&&{getBoundingClientRect:()=>e.domRect,nodeType:1},anchorOrigin:{vertical:"center",horizontal:"center"}},Z.createElement(vt.Z,null,Z.createElement(Bt,{diagnostic:e.diagnostic,onProposalAccepted:e.onProposalAccepted})))},Bt=e=>{var t,n,a;return Z.createElement(Ne.Z,{dense:!0},(null!==(a=null===(n=null===(t=e.diagnostic)||void 0===t?void 0:t.proposals)||void 0===n?void 0:n.slice(0,6))&&void 0!==a?a:[]).map((t=>Z.createElement(Me.ZP,{disablePadding:!0,dense:!0,onClick:()=>{e.onProposalAccepted(t,e.diagnostic)}},Z.createElement(Mt.Z,{dense:!0},Z.createElement(ze.Z,null,t))))))},Wt=()=>Z.createElement($.Z,{sx:{width:"100%",height:"8px"}});var Ht=n(461);const Gt=({word:e,onClick:t})=>Z.createElement(Ht.Z,{style:{flex:"1 1 auto"},onClick:t,label:e});var qt=n(9669),Qt=n.n(qt),Yt=n(1185),Jt=n(9215);const Kt=(0,me.C)({id:"dictionary",initial:"waiting",context:{result:[]},on:{INPUT:[{target:"loading",cond:"isValidInput",actions:(0,ue.f0)({input:(e,t)=>t.input})}]},states:{waiting:{id:"waiting"},loading:{initial:"debouncing",states:{debouncing:{on:{INPUT:[{target:"debouncing",cond:"isValidInput",actions:(0,ue.f0)({input:(e,t)=>t.input})},{target:"#dictionary.waiting"}]},after:[{delay:"DEBOUNCE",target:"active"}]},active:{invoke:{src:e=>(0,re.mG)(void 0,void 0,void 0,(function*(){return t=e.input,(0,re.mG)(void 0,void 0,void 0,(function*(){return logger.verbose(`Fetching definition for "${t}`),Qt().get(t,{baseURL:"https://api.dictionaryapi.dev/api/v2/entries/en/"}).then((e=>e.data[0].meanings))}));var t})),onDone:[{target:"#displaying",cond:(e,t)=>Array.isArray(t.data)&&t.data.length>0,actions:(0,ue.f0)({inputForResult:e=>e.input,result:(e,t)=>t.data.map((e=>Object.assign(Object.assign({},e),{definitions:e.definitions.map((e=>Object.assign(Object.assign({},e),{synonyms:(0,Yt.Z)((0,Jt.Z)(e.synonyms.map((e=>e.split(",").map((e=>e.trim())))))),antonyms:(0,Yt.Z)((0,Jt.Z)(e.antonyms.map((e=>e.split(",").map((e=>e.trim()))))))})))})))})},{target:"#no-results",actions:(0,ue.f0)({result:(e,t)=>{var n;return null!==(n=t.data)&&void 0!==n?n:[]}})}],onError:{target:"#no-results",actions:[(0,ue.f0)({error:(e,t)=>t.data,result:[]}),e=>logger.warn(`Failed to load definition for ${e.input}`)]}}}}},displaying:{id:"displaying"},"no-results":{id:"no-results"}}},{delays:{DEBOUNCE:()=>a.K?100:1e3},guards:{isValidInput:(e,t)=>t.input&&t.input.trim().length>0&&!!t.input.match(/\w+/)&&t.input!==e.input}}),Xt=({query:e,onRelatedTextClicked:t,isVisible:n,onLoadingChanged:a})=>{const[o,l]=(0,be.e)(Kt);(0,Z.useEffect)((()=>{n&&e&&l({type:"INPUT",input:e})}),[e,n]),(0,Z.useEffect)((()=>{null==a||a(o.matches("loading"))}),[o.matches("loading")]);const r=o.context.result;return Z.createElement($.Z,{display:"flex",flexDirection:"column",gap:"8px",height:"100%",width:"100%"},Z.createElement(Ot,{visible:o.matches("waiting"),text:"Waiting for lyrics"}),Z.createElement(Ot,{visible:o.matches("no-results"),text:"No definition found"}),r.length>0&&Z.createElement(en,{query:o.context.inputForResult,meanings:r,onRelatedTextClicked:t}))},en=Z.memo((e=>Z.createElement($.Z,{sx:{overflow:"auto",paddingLeft:"16px",paddingRight:"16px"}},Z.createElement(Wt,null),Z.createElement(_.Z,{variant:"h5"},e.query),Z.createElement($.Z,{sx:{display:"flex",flexDirection:"column",gap:"16px"}},e.meanings.map(((t,n)=>{var a,o;return Z.createElement(Z.Fragment,{key:JSON.stringify(t)},Z.createElement(tn,{meaning:t,onRelatedTextClicked:e.onRelatedTextClicked}),((null===(a=t.synonyms)||void 0===a?void 0:a.length)>0||(null===(o=t.antonyms)||void 0===o?void 0:o.length)>0)&&Z.createElement($e.Z,{variant:"middle"},Z.createElement(_.Z,{variant:"caption"},"Related")),Z.createElement(an,{disablePadding:!0,synonyms:t.synonyms,antonyms:t.antonyms,onRelatedTextClicked:e.onRelatedTextClicked}),n<e.meanings.length-1&&Z.createElement($e.Z,{variant:"fullWidth"}))}))),Z.createElement(Wt,null))));en.displayName="MeaningList";const tn=e=>Z.createElement($.Z,{display:"flex",flexDirection:"column",gap:"8px"},Z.createElement(_.Z,{variant:"subtitle1",sx:{fontWeight:"bold"}},e.meaning.partOfSpeech),e.meaning.definitions.map(((t,n)=>Z.createElement(nn,{showHeader:e.meaning.definitions.length>1,key:n,index:n+1,definition:t,onRelatedTextClicked:e.onRelatedTextClicked})))),nn=({index:e,definition:t,showHeader:n,onRelatedTextClicked:a})=>{var o,l;return Z.createElement($.Z,null,n&&Z.createElement($e.Z,{variant:"middle",sx:{paddingTop:"4px",paddingBottom:"4px"}},Z.createElement(_.Z,{variant:"caption"},e)),Z.createElement(_.Z,null,t.definition),(null===(l=null===(o=t.example)||void 0===o?void 0:o.trim())||void 0===l?void 0:l.length)>0&&Z.createElement(_.Z,{variant:"body2",sx:{fontStyle:"italic"}},t.example),Z.createElement(an,{synonyms:t.synonyms,antonyms:t.antonyms,onRelatedTextClicked:a}))},an=e=>{const t=(0,Z.useMemo)((()=>{var t,n;return!((null===(t=e.antonyms)||void 0===t?void 0:t.length)>0||(null===(n=e.synonyms)||void 0===n?void 0:n.length)>0)}),[e.synonyms,e.antonyms]),n=(0,Z.useMemo)((()=>[...new Set(e.synonyms)]),[e.synonyms]),a=(0,Z.useMemo)((()=>[...new Set(e.antonyms)]),[e.antonyms]),o=n.length>0,l=a.length>0;return Z.createElement($.Z,{sx:{padding:e.disablePadding?void 0:"4px",display:t?"none":void 0}},o&&Z.createElement(on,{label:l?"Synonyms":null,words:n,onRelatedTextClicked:e.onRelatedTextClicked}),o&&l&&Z.createElement($.Z,{height:"8px"}),l&&Z.createElement(on,{label:"Antonyms",words:a,onRelatedTextClicked:e.onRelatedTextClicked}))},on=e=>Z.createElement(Z.Fragment,null,e.label&&Z.createElement(_.Z,{variant:"subtitle2",sx:{paddingBottom:"4px",fontSize:"italic"}},e.label),Z.createElement($.Z,{display:"flex",flexWrap:"wrap",flexDirection:"row",gap:"4px"},e.words.map((t=>Z.createElement(Gt,{key:t,word:t,onClick:()=>e.onRelatedTextClicked(t)})))));class ln{constructor(e,t){this.word=e,this.score=t}static get[Symbol.for("___CTOR_ARGS___")](){return["string","number"]}}const rn=(e,t)=>(0,re.mG)(void 0,void 0,void 0,(function*(){let n;switch(t){case"perfect":n="rel_rhy";break;case"near":n="rel_nry";break;case"sounds-like":n="sl"}logger.debug(`Fetching ${t} rhymes for word: ${e}`);const a=yield fetch(`https://lyricistant.wardellbagby.workers.dev/words?${n}=${e}&max=${(e=>"perfect"===e?50:25)(t)}`);if(a.ok&&a.status<400){const n=yield a.text();logger.debug(`Response for ${t} and ${e}`,n);try{return JSON.parse(n)}catch(t){return logger.error("Couldn't parse rhymes response to JSON!",e,n),[]}}return logger.error("Failed to fetch rhymes! Returning an empty list.",e,a),[]})),sn=(e,t)=>e.map((e=>new ln(e.word,e.score+t))),cn=(...e)=>n.e(953).then(n.bind(n,3953)).then((({rhymeGenerator:t})=>t.generateRhymes(...e))),dn=(e,t)=>(0,re.mG)(void 0,void 0,void 0,(function*(){let n;switch(t){case ct.OK.Offline:n=yield cn(e);break;case ct.OK.Datamuse:try{n=yield(a=e,(0,re.mG)(void 0,void 0,void 0,(function*(){return 0===a.length?[]:Promise.all([rn(a,"perfect").then((e=>sn(e,1e4))),rn(a,"near").then((e=>sn(e,1e3))),rn(a,"sounds-like")]).then((e=>{return((e,t)=>{const n=new Map,a=[];for(const o of e)n.has(t(o))||(n.set(t(o),!0),a.push(o));return a})((t=e,t.reduce(((e,t)=>e.concat(t)))),(e=>e.word)).sort(((e,t)=>t.score-e.score));var t}))})))}catch(t){logger.warn("Failed to fetch Datamuse rhymes; falling back to offline",t),n=yield cn(e)}}var a;return n.filter((e=>e&&e.word&&e.score))})),mn=(0,me.C)({id:"rhymes",initial:"inactive",context:{rhymes:[]},on:{INPUT:[{target:".loading",cond:"isValidInput",actions:(0,ue.f0)({input:(e,t)=>t.input,rhymeSource:(e,t)=>t.rhymeSource})}]},states:{inactive:{id:"#inactive"},loading:{initial:"debouncing",states:{debouncing:{on:{INPUT:[{target:"debouncing",cond:"isValidInput",actions:(0,ue.f0)({input:(e,t)=>t.input,rhymeSource:(e,t)=>t.rhymeSource})},{target:"#rhymes.inactive"}]},after:[{delay:"DEBOUNCE",target:"active"}]},active:{invoke:{id:"fetch-rhymes",src:e=>(0,re.mG)(void 0,void 0,void 0,(function*(){return dn(e.input,e.rhymeSource)})),onDone:[{target:"#displaying",cond:(e,t)=>Array.isArray(t.data)&&t.data.length>0,actions:(0,ue.f0)({rhymes:(e,t)=>t.data})},{target:"#no-results",actions:(0,ue.f0)({rhymes:(e,t)=>t.data})}],onError:{target:"#error",actions:(0,ue.f0)({error:(e,t)=>t.data})}}}}},displaying:{id:"displaying"},"no-results":{id:"no-results"},error:{id:"error"}}},{delays:{DEBOUNCE:()=>a.K?100:1e3},guards:{isValidInput:(e,t)=>e.input!==t.input||e.rhymeSource!==t.rhymeSource}});var un=n(5800);const pn=({rhyme:e,onRhymeClicked:t})=>{const n=(0,Z.useCallback)((()=>{t(e)}),[e,t]);return Z.createElement(Gt,{word:e.word,key:e.word,onClick:n})},gn=Z.memo((({rhymes:e,onRhymeClicked:t})=>Z.createElement($.Z,{display:e.length>0?"flex":"none",flexWrap:"wrap",gap:"4px",alignContent:"start",flexDirection:"row",overflow:"auto",paddingLeft:"16px",paddingRight:"16px"},Z.createElement(Wt,null),e.map((e=>Z.createElement(pn,{rhyme:e,key:e.word,onRhymeClicked:t}))),Z.createElement(Wt,null))));gn.displayName="RhymesList";const fn=e=>{const[t,n]=(0,be.e)(mn),a=(0,un.useErrorHandler)(),[o]=je("prefs-updated");(0,Z.useLayoutEffect)((()=>{e.isVisible&&e.query&&o&&n({type:"INPUT",input:e.query,rhymeSource:o.rhymeSource})}),[e.query,e.isVisible,o]),(0,Z.useEffect)((()=>{t.matches("error")&&a(t.context.error)}),[a,t]),(0,Z.useEffect)((()=>{var n;null===(n=e.onLoadingChanged)||void 0===n||n.call(e,t.matches("loading"))}),[t.matches("loading")]);const l=t.context.rhymes;return Z.createElement($.Z,{display:"flex",flexDirection:"column",gap:"8px",height:"100%",width:"100%"},Z.createElement(Ot,{visible:t.matches("inactive"),text:"Waiting for lyrics"}),Z.createElement(Ot,{visible:t.matches("no-results"),text:"No rhymes found"}),Z.createElement(gn,{rhymes:l,onRhymeClicked:e.onRhymeClicked}))};fn.displayName="Rhymes";var hn=n(1237),yn=n(6399),xn=n(1781),En=n(4656),vn=n(2640),bn=n(2875),kn=n(3246),wn=n(3893),Cn=n(5425);const Zn=({index:e,selectedIndex:t,children:n})=>Z.createElement($.Z,{sx:{display:e===t?"block":"none",flex:"1 1 auto",overflow:"auto"}},n),Sn=({isExpanded:e})=>Ie()?e?Z.createElement(bn.Z,null):Z.createElement(kn.Z,null):e?Z.createElement(jt.Z,null):Z.createElement(hn.Z,null),Tn=e=>Z.createElement(xn.Z,{size:"small",onClick:()=>e.onClick(),color:"primary"},e.icon),On=e=>{const[t,n]=(0,Z.useState)(0),[a,o]=(0,Z.useState)(!1),[l,r]=(0,Z.useState)(!0),i=Ie(),[s,c]=(0,Z.useState)(!1),[d]=je("prefs-updated"),m=(0,Z.useCallback)((t=>{n(t),e.onTabChanged({isQueryTab:0===t||1===t})}),[n,e.onTabChanged]),u=null==d||d.detailPaneVisibility===ct.Li.Toggleable;Fe("show-detail-pane",(()=>{u&&r(!0)}),[u]),Fe("close-detail-pane",(()=>{u&&r(!1)}),[u]);const p=l||s?"unset":"none";return(0,Z.useEffect)((()=>{o(!1)}),[t]),(0,Z.useEffect)((()=>{i||r(!0)}),[i]),(0,Z.useEffect)((()=>{(null==d?void 0:d.detailPaneVisibility)===ct.Li.Always_Show&&(r(!0),c(!1))}),[null==d?void 0:d.detailPaneVisibility]),Z.createElement($.Z,{width:i?void 0:"400px",flex:i?"0 1":void 0},Z.createElement($.Z,{display:"flex",flexDirection:"column",justifyContent:"end",paddingTop:i?void 0:"16px",paddingLeft:i?"16px":void 0,paddingRight:"16px",paddingBottom:"16px",height:"100%",width:"100%",gap:"8px"},Z.createElement(pt.Z,{in:l,direction:i?"up":"left",onEnter:()=>c(!0),onExited:()=>c(!1)},Z.createElement(vt.Z,{elevation:1,sx:{minHeight:i?"250px":void 0,maxHeight:i?"600px":void 0,flex:"1 1 0",display:p,overflow:"auto"}},Z.createElement($.Z,{display:"flex",flexDirection:"column",height:"100%",width:"100%"},Z.createElement(En.Z,{value:!!l&&t,onChange:(e,t)=>m(t),variant:"fullWidth",sx:{flex:"0 0 auto",boxShadow:1},TabIndicatorProps:{children:a?Z.createElement(at.Z,{variant:"indeterminate"}):void 0}},Z.createElement(vn.Z,{"aria-label":"Rhymes Tab",icon:Z.createElement(wn.Z,null)}),Z.createElement(vn.Z,{"aria-label":"Dictionary Tab",icon:Z.createElement(Cn.Z,null)}),Z.createElement(vn.Z,{"aria-label":"Diagnostics Tab",icon:Z.createElement(yn.Z,null)})),Z.createElement(Zn,{index:0,selectedIndex:t},Z.createElement(fn,Object.assign({},e.rhymeProps,{isVisible:0===t&&l,onLoadingChanged:o}))),Z.createElement(Zn,{index:1,selectedIndex:t},Z.createElement(Xt,Object.assign({},e.dictionaryProps,{isVisible:1===t&&l,onLoadingChanged:o}))),Z.createElement(Zn,{index:2,selectedIndex:t},Z.createElement($t,Object.assign({},e.diagnosticsProps,{isVisible:2===t&&l,onLoadingChanged:o})))))),Z.createElement($.Z,{display:"flex",justifyContent:"end",flex:"0 0 auto",gap:"16px"},e.buttons.map(((e,t)=>Z.createElement(Tn,Object.assign({key:t},e)))),u&&Z.createElement(xn.Z,{size:"small",onClick:()=>{r(!l)}},Z.createElement(Sn,{isExpanded:l})))))};On.displayName="DetailPane";const Pn=(0,n(948).ZP)("div")({flex:"1 1 500px",minHeight:"50px",position:"relative"}),Dn=({endColor:e,towards:t})=>{const n=`#${e.slice(1)}00`,a="bottom"===t?"180deg":"0deg";return Z.createElement($.Z,{sx:{content:"''",height:"8px",width:"100%",background:`linear-gradient(${a}, ${n} 0%, ${e} 100%)`,position:"absolute",zIndex:1,top:"top"===t?"0":void 0,bottom:"bottom"===t?"0":void 0}})},Rn=e=>{const t=(0,Z.useRef)(),[n]=je("theme-updated"),a=(0,b.Z)(),o=(0,Z.useCallback)((e=>{var t;logger.debug("Attempted to drop a file."),(t=e,(0,re.mG)(void 0,void 0,void 0,(function*(){var e,n,a;const o=t instanceof File?t:t.getAsFile(),l=t instanceof File?void 0:yield null===(e=t.getAsFileSystemHandle)||void 0===e?void 0:e.call(t);return{metadata:{path:null!==(n=o.path)&&void 0!==n?n:o.name,name:o.name},type:null!==(a=o.type)&&void 0!==a?a:"",data:yield o.arrayBuffer(),extras:{handle:l}}}))).then((e=>platformDelegate.send("open-file-attempt",e))).catch((e=>{logger.error(e)}))}),[]),l=(0,Z.useCallback)(((t,n)=>{e.onTextChanged({text:t,cursorPosition:n,isTransactional:!0})}),[e.onTextChanged]),{view:r,isModified:i,resetHistory:s,redo:d,undo:m,openFindReplaceDialog:u,setContainer:p}=M({text:e.value.text,markedText:e.selectedText&&{from:e.selectedText.from,to:e.selectedText.to},cursorPosition:e.value.cursorPosition,onTextChanged:l,onFileDropped:o,onTextSelected:e.onTextSelected,font:(g=null==n?void 0:n.font,g===ct.Zx.Roboto?"Roboto":"Roboto Mono"),diagnostics:e.diagnostics});var g;return(0,Z.useEffect)((()=>{t.current&&p(t.current)}),[t.current]),(0,Z.useEffect)((()=>{e.onModificationStateChanged(i)}),[i]),(0,Z.useEffect)((()=>{e.value.isTransactional||s()}),[e.value]),(0,Z.useEffect)((()=>{if(!r||!e.selectedDiagnostic)return;r.dispatch({effects:[c.tk.scrollIntoView(e.selectedDiagnostic.from,{y:"start",yMargin:20})]});const t=r.domAtPos(e.selectedDiagnostic.from).node,n=document.createRange();n.selectNode(t);const a=setTimeout((()=>{e.onSelectedDiagnosticRendered(n.getBoundingClientRect())}),0);return()=>{clearTimeout(a)}}),[r,e.selectedDiagnostic]),Ln(m,d,u),Z.createElement(Pn,{ref:t},Z.createElement($.Z,{sx:{position:"absolute",top:"0px",bottom:"0px",left:"8px",right:"8px"}},Z.createElement(Dn,{towards:"top",endColor:a.palette.background.default}),Z.createElement(Dn,{towards:"bottom",endColor:a.palette.background.default})))};Rn.displayName="Editor";const Ln=(e,t,n)=>{(0,Z.useEffect)((()=>(platformDelegate.on("undo",e),platformDelegate.on("redo",t),platformDelegate.on("find",n),platformDelegate.on("replace",n),()=>{platformDelegate.removeListener("undo",e),platformDelegate.removeListener("redo",t),platformDelegate.removeListener("find",n),platformDelegate.removeListener("replace",n)})),[e,t,n])},An=e=>{if(!e)return e;let t=e;for(;(e.stack||e.reason)&&t!==(e.stack||e.reason);)t=e.stack||e.reason;return t},In=(e,t)=>!("string"==typeof e&&e.includes("ResizeObserver")||(!t||0===t.length)&&"string"==typeof e&&e.includes("Script error"));var Fn=n(4685),jn=n(5135),Mn=n(2323),zn=n(7150),Nn=n(82),$n=n(5683),_n=n(4431),Vn=n(8885),Un=n(4697);const Bn=({onClick:e,ariaLabel:t,debounce:n,sx:a,children:o})=>{const l=(0,Un.y1)(e,200);return Z.createElement($.Z,{padding:"8px","aria-label":t,role:"button",sx:a,onClick:n?l:e},Z.createElement(xt.Z,null,o))},Wn=e=>Z.createElement(Bn,{key:e.label,onClick:e.onClick,ariaLabel:e.label},Z.createElement(e.icon,null)),Hn=e=>{const t="horizontal"===e.direction,[n,a]=(0,Z.useState)(null),o=(0,Z.useMemo)((()=>e.leading.length>3&&t),[e.leading,t]),l=(0,Z.useMemo)((()=>o?e.leading.slice(0,3):e.leading),[e.leading,o]),r=(0,Z.useMemo)((()=>o?[...e.leading.slice(3),...e.trailing]:e.trailing),[e.leading,e.trailing,o]);return(0,Z.useEffect)((()=>{a(null)}),[t]),Z.createElement($.Z,{display:"flex",height:t?"auto":"100%",width:t?"100%":"auto",flexDirection:t?"row":"column"},l.map(Wn),Z.createElement($.Z,{flexGrow:"1"}),Z.createElement(Bn,{sx:{display:t?void 0:"none"},ariaLabel:"Additional Menu Buttons",onClick:e=>a(e.currentTarget),debounce:!1},Z.createElement(Fn.Z,null)),Z.createElement(_n.Z,{anchorEl:n,open:!!n,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:()=>a(null)},r.map((e=>Z.createElement(Xe.Z,{key:e.label,"aria-label":e.label,onClick:()=>{a(null),e.onClick()}},Z.createElement(Vn.Z,null,Z.createElement(e.icon,null)),Z.createElement(ze.Z,null,e.label))))),t?null:r.map(Wn))},Gn=e=>{const t=(0,b.Z)(),[n]=je("ui-config"),a=Ie(),o=a?"horizontal":"vertical",l=(0,Z.useMemo)((()=>[{label:"New file",icon:jn.Z,onClick:e.onNewClicked},(null==n?void 0:n.showOpen)&&{label:"Open file",icon:Mn.Z,onClick:e.onOpenClicked},{label:"Save file",icon:mt.Z,onClick:e.onSaveClicked},(null==n?void 0:n.showOpen)&&{label:"View file history",icon:zn.Z,onClick:e.onFileHistoryClicked}].filter((e=>e))),[n,e]),r=(0,Z.useMemo)((()=>[(null==n?void 0:n.showDownload)&&{label:"Download Lyricistant",icon:Nn.Z,onClick:e.onDownloadClicked},{label:"Open preferences",icon:$n.Z,onClick:e.onPreferencesClicked}].filter((e=>!!e))),[n,e]);return Z.createElement($.Z,{paddingTop:"8px",paddingLeft:"8px",paddingRight:a?"8px":void 0,paddingBottom:a?void 0:"8px"},Z.createElement(vt.Z,{color:t.palette.primary.main,sx:{backgroundColor:t.palette.background.paper,height:a?"auto":"100%",width:a?"100%":"auto"}},Z.createElement(Hn,{direction:o,leading:l,trailing:r})))};Gn.displayName="Menu";var qn=n(2068),Qn=n(1013),Yn=n(2793),Jn=n(5067),Kn=n(5951);const Xn=({main:e,detail:t,menu:n})=>{const a=Ie();return(0,Z.useEffect)((()=>{logger.info(`Switching layout. isSmallLayout: ${a}`)}),[a]),Z.createElement($.Z,{flex:"1 1 auto",display:"flex",overflow:"hidden",flexDirection:a?"column":"row"},Z.createElement(Z.Fragment,{key:"menu"},n),Z.createElement(Z.Fragment,{key:"main"},e),Z.createElement(Z.Fragment,{key:"detail"},t))};var ea=n(5518);const ta=ea.tq||ea.w1||!Promise||!File||!Blob,na=({onContinue:e,open:t})=>Z.createElement(z.Z,{open:t},Z.createElement(N.Z,null,"Unsupported browser"),Z.createElement(q.Z,null,Z.createElement(ve.Z,null,"Lyricistant doesn't currently support your browser. You might experience some bugs or performance issues. ",ea.tq?"Try switching to a desktop browser.":"Try switching to a more modern browser.")),Z.createElement(U.Z,null,Z.createElement(B.Z,{key:"no",onClick:()=>window.history.back(),color:"primary"},"Go back"),Z.createElement(B.Z,{key:"yes",onClick:e,color:"primary"},"Continue")));var aa=n(1521),oa=n(5899),la=n(4810),ra=n(9164),ia=n(3238),sa=n(6720),ca=n(745),da=n(8731);(()=>{const e=window.onerror;window.onerror=(t,n,a,o,l)=>{var r;const i=null!==(r=An(t))&&void 0!==r?r:An(l);In(i,n)&&((null!==logger&&void 0!==logger?logger:console).error(JSON.stringify(i),{url:n,line:a,col:o},l),e?e(i,n,a,o,l):alert(["Sorry, Lyricistant has crashed! Please close this page and contact the developers.","Continuing to use Lyricistant may result in undesired behavior.","","App version: 3.3.0","Homepage: https://github.com/wardellbagby/lyricistant"].join("\n")))},window.onunhandledrejection||(window.onunhandledrejection=e=>window.onerror(e,null,null,null,null))})(),(()=>{if(a.K)return;const e=document.createElement("script");e.setAttribute("src","https://gc.zgo.at/count.js"),e.setAttribute("async","true"),e.setAttribute("data-goatcounter","https://lyricistant.goatcounter.com/count"),e.setAttribute("data-goatcounter-settings",JSON.stringify({allow_local:!0,no_onload:!0,no_events:!0})),document.head.append(e);const t=setTimeout((()=>{if(!window.goatcounter||!window.goatcounter.count)return;let e;e=location.host.includes("lyricistant.app")?location.host:o.APP_PLATFORM;const n=`${e}/${o.APP_VERSION}/`;clearTimeout(t),window.goatcounter.count({path:n,title:"",event:!1})}),1e4)})();const ma=document.getElementById("app"),ua=ca.createRoot(ma),pa=()=>window.location.hash.replace(/^#/,"")||"/",ga=(e,...t)=>{e?(0,da.c4)("#"+e,...t):(0,da.c4)("/",...t),window.history.replaceState({internal:!0},null,null)};ua.render(Z.createElement(Z.StrictMode,null,Z.createElement((({children:e})=>{const t=(0,Z.useRef)(!1);return(0,Z.useEffect)((()=>{t.current||platformDelegate.send("ready-for-events",{isDeepLink:0!==location.hash.length}),t.current=!0}),[]),Z.createElement(Z.Fragment,null,e)}),null,Z.createElement((({onThemeChanged:e,onThemeReady:t,children:a})=>{const[o,l]=(0,Z.useState)((0,oa.j)()),[r,i]=(0,Z.useState)(null);return Fe("theme-updated",(e=>{const a=(0,oa.j)(e);i((0,oa.X)(e).palette),(e=>(0,re.mG)(void 0,void 0,void 0,(function*(){return(null==e?void 0:e.font)===ct.Zx.Roboto?n.e(725).then(n.bind(n,2725)):n.e(762).then(n.bind(n,2762))})))(e).then((()=>{l(a),t()})).catch((e=>{l(a),t(),logger.warn("Failed to load fonts",e)}))}),[l]),(0,Z.useEffect)((()=>{r&&e(r)}),[r,e]),Z.createElement(la.Z,{injectFirst:!0},Z.createElement(ra.Z,{theme:o},Z.createElement(ia.Z,{styles:{".random-button":{color:o.palette.primary.main,backgroundColor:o.palette.background.default}}}),Z.createElement(sa.ZP,null,a," ")))}),{onThemeChanged:e=>{document.body.style.backgroundColor=e.background,document.body.style.color=e.primaryText,(0,aa.i)(e)},onThemeReady:()=>{(0,aa.l)(),ma.style.opacity="100%"}},Z.createElement(Jn.wT,{maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"right"}},Z.createElement((function({children:e}){const[t,n]=(0,Z.useState)(null);Fe("ui-config",n);const[a,o]=(0,Z.useState)(!1),l=!0===(null==t?void 0:t.showBrowserWarning)&&ta&&!a;return Z.createElement(Z.Fragment,null,Z.createElement(na,{open:l,onContinue:()=>o(!0)}),e)}),null,Z.createElement(ae.F0,{hook:()=>[(0,da.LD)(pa),ga]},Z.createElement((function(){const[e,t]=(0,Z.useState)({text:s.xv.empty,isTransactional:!1}),[a,o]=(0,Z.useState)(null),[l,r]=(0,Z.useState)(),[i,c]=(0,Z.useState)(!1),d=oe(),[m]=je("ui-config"),[u,p]=(0,Z.useState)(!0),[g,f]=(0,Z.useState)([]),[h,y]=(0,Z.useState)(null),[x,E]=(0,Z.useState)(null),[v,b]=(0,Z.useReducer)((e=>e+1),0);(0,Z.useEffect)((()=>{y(null)}),[g]);const k=(0,Z.useCallback)((()=>platformDelegate.send("save-file-attempt",e.text.toString())),[e.text]),w=(0,Z.useCallback)((e=>{t((t=>Object.assign(Object.assign({},t),e)))}),[t]),S=(0,qn.Z)((n=>{const a=e.text.sliceString(0,l.from),o=e.text.sliceString(l.to);t({text:s.xv.of((a+n+o).split("\n")),isTransactional:!0,cursorPosition:l.from+n.length}),r({text:n,from:l.from,to:l.from+n.length})})),T=(0,qn.Z)((e=>{e&&e.text&&r(e)}));Fe("app-title-changed",(e=>document.title=e)),((e,t,n)=>{const{enqueueSnackbar:a}=(0,Jn.Ds)();(0,Z.useEffect)((()=>{const o=()=>{platformDelegate.send("is-file-modified",e)};platformDelegate.on("check-file-modified",o);const l=(e,n)=>{t({isTransactional:!1}),n&&a(`${n} saved`,{variant:"success"})};platformDelegate.on("file-save-ended",l);const r=()=>{n(),t({text:s.xv.empty,isTransactional:!1})};platformDelegate.on("new-file-created",r);const i=(e,o,l)=>{e?a("Couldn't open selected file.",{variant:"error"}):(n(),t({text:s.xv.of(o.split("\n")),isTransactional:!l}))};return platformDelegate.on("file-opened",i),()=>{platformDelegate.removeListener("check-file-modified",o),platformDelegate.removeListener("file-save-ended",l),platformDelegate.removeListener("new-file-created",r),platformDelegate.removeListener("file-opened",i)}}),[e,t])})(i,w,(()=>r({from:0,to:0,text:""}))),(0,Kn.x)((()=>{if((null==m?void 0:m.promptOnUrlChange)&&i)return"Are you sure you want to leave? Your changes haven't been saved."})),(0,Z.useEffect)((()=>{const t=()=>{platformDelegate.send("editor-text",e.text.toString())};return platformDelegate.on("request-editor-text",t),()=>{platformDelegate.removeListener("request-editor-text",t)}}),[e.text]),(0,Z.useEffect)((()=>{window.onerror=(e,t,n,a,l)=>{const r=An(null!=l?l:e);In(r,t)&&o(r)},window.onunhandledrejection=window.onerror}),[]),(0,Z.useEffect)((()=>{const t=setTimeout((()=>{platformDelegate.send("editor-idle",e.text.toString())}),15e3);return()=>clearTimeout(t)}),[e]);const O=Ie();(0,Z.useEffect)((()=>{platformDelegate.send("layout-changed",O)}),[O]);const P=(0,Z.useCallback)((t=>Z.createElement(W,{error:An(t.error),editorText:e.text.toString()})),[e.text]),D=(0,qn.Z)((()=>d("/download"))),R=(0,qn.Z)((()=>d("/file-history"))),L=(0,qn.Z)((()=>d("/preferences"))),A=(0,qn.Z)((()=>platformDelegate.send("new-file-attempt"))),I=(0,qn.Z)((()=>platformDelegate.send("open-file-attempt"))),F=(0,qn.Z)((e=>S(e.word))),{onInspirationButtonClicked:j,isInspirationButtonEnabled:M}=((e,t,a)=>{const o=(()=>{const[e,t]=(0,Z.useState)(null);return(0,Z.useEffect)((()=>{e||n.e(733).then(n.t.bind(n,7733,19)).then((e=>{t(e)}))}),[]),e})();return{onInspirationButtonClicked:(0,qn.Z)((()=>{var n;const l=null!==(n=e.cursorPosition)&&void 0!==n?n:0,r=e.text.sliceString(0,l),i=e.text.sliceString(l),c=(0,C.Z)(o),d=e.text.lineAt(l);let m=c,u=l+c.length;const p=l===d.from,g=l===d.to;p&&(m=(0,Qn.Z)(m));const f=!p&&l>0&&e.text.slice(l-1,l).toString().match(/\s/),h=!g&&l<e.text.length&&e.text.slice(l,l+1).toString().match(/\s/);!r||p||f||(m=" "+m,u+=1),!i||g||h||(m+=" "),t({text:s.xv.of((r+m+i).split("\n")),isTransactional:!0,cursorPosition:u}),a({text:c,from:u-c.length,to:u})})),isInspirationButtonEnabled:!!o}})(e,t,r),{onProposalAccepted:z}=((e,t,n)=>({onProposalAccepted:(0,qn.Z)(((a,o)=>{t(Object.assign(Object.assign({},e),{text:e.text.replace(o.from,o.to,s.xv.of([a]))})),n({text:a,from:o.from,to:o.from+a.length})}))}))(e,t,r),N=[M&&{icon:Z.createElement(Yn.Z,null),onClick:j}].filter((e=>!!e));return a?Z.createElement(W,{error:a,editorText:e.text.toString()}):Z.createElement(un.ErrorBoundary,{fallbackRender:P},Z.createElement(Xn,{menu:Z.createElement(Gn,{onDownloadClicked:D,onFileHistoryClicked:R,onPreferencesClicked:L,onNewClicked:A,onOpenClicked:I,onSaveClicked:k}),main:Z.createElement(Rn,{value:e,selectedText:u?l:null,diagnostics:g,selectedDiagnostic:h,onSelectedDiagnosticRendered:E,onTextChanged:t,onTextSelected:T,onModificationStateChanged:c}),detail:Z.createElement(On,{buttons:N,onTabChanged:e=>{p(e.isQueryTab)},rhymeProps:{onRhymeClicked:F,query:null==l?void 0:l.text},dictionaryProps:{onRelatedTextClicked:S,query:null==l?void 0:l.text},diagnosticsProps:{text:e.text,onDiagnosticsLoaded:f,onProposalAccepted:z,onDiagnosticClicked:e=>{y(Object.assign(Object.assign({},e),{key:v})),b()}}})}),Z.createElement(Tt,null),Z.createElement(Ut,{diagnostic:h,domRect:x,onProposalAccepted:z,onClose:()=>{y(null),E(null)}}))}),null))))))))},1521:(e,t,n)=>{n.d(t,{i:()=>r,l:()=>l});var a=n(4588);r((0,n(5899).X)().palette);let o=document.getElementById("preload-overlay");if(!o){o=document.createElement("div"),o.id="preload-overlay",document.body.append(o),o.innerHTML=a.Z;const e=o.firstElementChild;e.style.width="128px",e.style.height="128px",e.id="preload-overlay-logo"}const l=()=>{o&&(o.style.opacity="0",setTimeout((()=>{null==o||o.remove(),o=null}),500))};function r(e){document.body.style.setProperty("--primary",e.primary),document.body.style.setProperty("--background",e.background),document.body.style.setProperty("--surface",e.surface),document.body.style.setProperty("--text",e.primaryText)}},5899:(e,t,n)=>{n.d(t,{X:()=>r,j:()=>i});var a=n(5527),o=n(4298),l=n(4345);const r=e=>{const t=!e||e.colorScheme===a.eL.Dark;return{palette:Object.assign(Object.assign({},t?c:s),null==e?void 0:e.systemPalette),isDark:t}},i=e=>{const{palette:t,isDark:n}=r(e);return(0,o.Z)((0,l.Z)({palette:{mode:n?"dark":"light",action:{hover:t.primary,hoverOpacity:0},primary:{main:t.primary},background:{default:t.background,paper:t.surface},text:{primary:t.primaryText,secondary:t.secondaryText}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}},typography:(null==e?void 0:e.textSize)?{fontSize:e.textSize}:void 0}))},s={primary:"#1b5e20",background:"#fafafa",surface:"#eeeeee",primaryText:"#212121",secondaryText:"#424242"},c={primary:"#f2b21c",background:"#141414",surface:"#232323",primaryText:"#f8f8f8",secondaryText:"#bdbdbd"}}}]);
//# sourceMappingURL=431.renderer.js.map